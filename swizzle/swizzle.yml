---
- name: install ansible prerequisutess
  import_playbook: ../ansible/pre.yml
  tags:
    - prereqs
    - ansible-prereqs

- name: install kubernetes prerequisites
  hosts: all
  become: yes
  roles:
    - common
    - docker
    - kubernetes
  tags:
    - prereqs
    - kubernetes-prereqs

- name: add kube-ucarp-vip static pod
  hosts: masters
  become: yes
  roles:
    - kube-ucarp-vip
  tags:
    - kube-ucarp-vip

- name: create kubernetes primary master
  hosts: masters
  become: yes
  roles:
    - kubernetes-master
  tags:
    - kubernetes-master

- name: create kubernetes nodes
  hosts: nodes
  become: yes
  roles:
    - kubernetes-node
  tags:
    - kubernetes-node
